(("undefined"!=typeof self?self:this).webpackJsonp_thunderbolt_elements=("undefined"!=typeof self?self:this).webpackJsonp_thunderbolt_elements||[]).push([[275],{378:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n(147),r=n(551),i=n(713);t.default=function(e){var t=o.createElement(r.a,Object(a.a)({id:e.id},e.meshProps),e.children);return o.createElement(i.a,Object(a.a)({},e,{mediaControls:t}))}},552:function(e,t,n){e.exports={"video-container":"witoi",videoContainer:"witoi","video-poster":"_1muMN",videoPoster:"_1muMN",video:"_1cXXy",videobox:"_8R29n",mediaControlsContainer:"rpkkZ",masked:"_2KK7m","videobox-container":"_2NPk3",videoboxContainer:"_2NPk3","videobox-fill":"_1FsDl",videoboxFill:"_1FsDl","alpha-canvas":"_2VkTV",alphaCanvas:"_2VkTV","has-canvas":"_1KWNy",hasCanvas:"_1KWNy","videobox-play":"_3vh-S",videoboxPlay:"_3vh-S","videobox-audio":"_3P-yP",videoboxAudio:"_3P-yP","videobox-audio-icon":"_1kWRy",videoboxAudioIcon:"_1kWRy","videobox-audio-on":"zbMfi",videoboxAudioOn:"zbMfi","videobox-audio-off":"_3KCX4",videoboxAudioOff:"_3KCX4"}},592:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i}));var a=n(0),o=n(522);function r(e){var t,n,r=e.playerRef,i=e.videoRef,u=e.audioSelector,d=e.isMobileView,s=e.autoplay,c=e.hasAudio,l=e.hasClick,v=e.hasRollIn,f=e.hasAudioRollIn,h=e.canClickPause,p=e.canRollPause,m=e.canReplay,w=e.extraMediaHandlers,b=void 0===w?{}:w;var y,C,E,R=!1,_=c,x=!(!s&&l),g={handleEvent:function(e){var t=e.type,n=r.current;if("loadeddata"!==t||!n)return"ended"===t&&n?(m||(R=!0,n.dataset.stop=""),void delete n.dataset.playing):void(b[t]&&n&&b[t](n));n.dataset.canPlay=""}},k=function(e,t){var n=!t.muted;_=!n,t.muted=n,e.dataset.audio=n?"off":"on"},A=function(e){e.dataset.showAudio="",clearTimeout(C),C=window.setTimeout((function(){delete e.dataset.showAudio}),2e3)},I=function(e){clearTimeout(C),delete e.dataset.showAudio},M=function(e){e.volume=0,e.muted=!1;var t=0;window.clearInterval(y),y=window.setInterval((function(){(t+=.2)>=1?(e.volume=1,window.clearInterval(y)):e.volume=t}),200)},L=function(e){e.volume=1;var t=1;window.clearInterval(y),y=window.setInterval((function(){(t-=.2)<=0?(e.volume=0,e.muted=!0,window.clearInterval(y)):e.volume=t}),200)},P=Object(o.b)()&&"ontouchend"in window&&d;return{onClick:P||!c&&!l?void 0:function(e){n&&n.resume();var a=r.current,o=i.current;a&&o&&!R&&(c&&!t&&(t=a.querySelector(u)),c&&t&&(A(a),t.contains(e.target))?k(a,o):o.paused?(a.dataset.playing="",o.play(),x=!0):h&&(delete a.dataset.playing,o.pause()))},onMouseEnter:!P&&(c||v||l)?function(){var e=r.current,t=i.current;if(e&&t&&!R&&(v?t.play():l&&(e.dataset.rollIn=""),c&&x&&(A(e),_&&(f||v)))){var a=function(){e.dataset.audio="on",M(t)};if(n)if("running"===n.state)a();else{var o=n.resume();o&&o.then(a)}else t.muted=!1,e.dataset.audio="on"}}:void 0,onMouseLeave:!P&&(c||p||l)?function(){var e=r.current,t=i.current;e&&t&&(p?t.pause():l&&delete e.dataset.rollIn,c&&(I(e),f&&!t.muted&&(n?L(t):t.muted=!0)))}:void 0,onMouseMove:!P&&c?function(){var e=r.current;e&&c&&x&&A(e)}:void 0,onTouchEnd:P&&(c||l||v)?function(e){var n=r.current,a=i.current;if(n&&a&&!R){c&&!t&&(t=n.querySelector(u));var o=!s&&!n.dataset.touched,d="on"===n.dataset.touched;c&&(A(n),t&&t.contains(e.target))?k(n,a):((o||d)&&(a.paused?(n.dataset.playing="",a.play()):(h||p)&&(delete n.dataset.playing,a.pause())),(l||v)&&(clearTimeout(E),n.dataset.touched="on",E=window.setTimeout((function(){return n.dataset.touched="off"}),1400)))}}:void 0,mediaHandler:g,setAudioContext:function(){var e=window.AudioContext||window.webkitAudioContext;Object(o.b)()&&e&&i.current&&(n=new e)},MEDIA_EVENTS:Object(a.f)(Object.keys(b),["loadeddata","ended"])}}function i(e){var t=e.playerRef,n=e.videoRef,a=e.onViewEnter,r=e.onViewLeave;if(Object(o.b)()){var i={visible:!window.document.hidden,intersecting:!1},u=function(){n.current&&t.current&&"playing"in t.current.dataset&&(i.visible=!window.document.hidden,i.visible&&i.intersecting?n.current.play():n.current.pause())};window.document.addEventListener("visibilitychange",u);var d=null;return t.current&&"function"==typeof window.IntersectionObserver&&(d=new window.IntersectionObserver((function(e){var o=t.current,u=n.current;u&&o&&e.forEach((function(e){u&&e.target===o&&(i.intersecting=e.isIntersecting,i.visible&&i.intersecting?(null==a||a(),"playing"in o.dataset&&u.play()):(null==r||r(),u.pause()))}))}))).observe(t.current),function(){window.document.removeEventListener("visibilitychange",u),d&&(d.disconnect(),d=null)}}}},713:function(e,t,n){"use strict";var a=n(0),o=n(147),r=n(511),i=n.n(r),u=n(775),d=n(627),s=n(558),c=n(522),l=n(592),v=n(552),f=n.n(v);u.Kampos.prototype.play=function(){var e=this;if(!this.animationFrameId){var t=function(){e.animationFrameId=window.requestAnimationFrame(t);var n=e.media;n&&n.readyState>=n.HAVE_CURRENT_DATA&&(!n.paused&&!n.ended||e._needsRedraw)&&(e._needsRedraw=!1,e.draw())};this.animationFrameId=window.requestAnimationFrame(t)}};function h(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?[parseInt(t[1],16)/255,parseInt(t[2],16)/255,parseInt(t[3],16)/255,1]:e}var p=function(e){void 0===e&&(e={});var t=[u.effects.transparentVideo()],n="brightness"in e,a="contrast"in e;if(n||a){var o=u.effects.brightnessContrast();n&&(o.brightness=e.brightness),a&&(o.contrast=e.contrast),t.push(o)}if(e.duotoneDark&&e.duotoneLight){var r=u.effects.duotone();r.dark=h(e.duotoneDark),r.light=h(e.duotoneLight),t.push(r)}var i="hue"in e,d="saturation"in e;if(i||d){var s=u.effects.hueSaturation();i&&(s.hue=e.hue),d&&(s.saturation=e.saturation),t.push(s)}return t},m=function(e){return e.readyState>=e.HAVE_CURRENT_DATA},w={count:0,set:new Set,add:function(e){return!!w.set.has(e)||!u.Kampos.preventContextCreation&&w.set.size<14&&(w.set.add(e),w.count=w.set.size,!0)},remove:function(e){w.set.delete(e),w.count=w.set.size}},b=Object(c.b)()&&d.b(window);t.a=function(e){var t=e.id,n=e.mediaControls,r=e.fillLayers,d=e.isMobileView,c=e.hasAudio,v=e.hasClick,h=e.hasRollIn,y=e.hasAudioRollIn,C=e.canClickPause,E=e.canRollPause,R=e.muted,_=e.autoplay,x=e.canReplay,g=e.animatePoster,k=e.filterEffect,A=e.alt,I=void 0===A?"":A,M=o.useRef(null),L=o.useRef(null),P=o.useRef(null),T=o.useRef(null),V=o.createRef(),O=o.useState(!b),S=O[0],N=O[1],j=!1,F=!1,K={play:function(){delete K.play,G()}},D=Object(l.a)({playerRef:M,videoRef:L,audioSelector:'[data-audio-for="'+t+'"]',isMobileView:d,autoplay:_,hasAudio:c,hasClick:v,hasRollIn:h,hasAudioRollIn:y,canClickPause:C,canRollPause:E,canReplay:x,extraMediaHandlers:K}),H=D.onClick,z=D.onMouseEnter,W=D.onMouseLeave,q=D.onMouseMove,X=D.onTouchEnd,J=D.mediaHandler,U=D.setAudioContext,Z=D.MEDIA_EVENTS;function $(){M.current&&P.current&&(T.current&&T.current.hasContext||w.add(V)?(T.current?(T.current.lostContext&&T.current.restoreContext(),T.current.play(),!F&&T.current.media&&m(T.current.media)&&"playing"in M.current.dataset&&G()):function(){try{T.current=new u.Kampos({target:P.current,effects:p(k||{}),onContextLost:function(){var e=T.current._source&&T.current._source.media;e&&(e.ended||e.paused)&&(T.current._needsRedraw=!0),B(),j&&$()}})}catch(e){N(!1)}if(L.current){var e=function(){var t;L.current&&(T.current.setSource({width:(t=L.current)&&t.videoWidth||0,height:t&&t.videoHeight/2||0,media:t}),$(),L.current.removeEventListener("loadeddata",e,!1))};m(L.current)?e():L.current.addEventListener("loadeddata",e,!1)}}(),T.current.hasContext=!0):F&&M.current&&L.current&&(delete M.current.dataset.showCanvas,F=!1))}function B(){w.remove(V),T.current.hasContext=!1,T.current.stop()}function G(){var e=L.current,t=M.current;t&&e&&T.current&&((e.paused||e.ended||T.current._needsRedraw)&&(T.current._needsRedraw=!1,T.current.draw()),e.addEventListener("seeked",(function n(){e.removeEventListener("seeked",n),t.dataset.showCanvas="",F=!0})),e.currentTime=0)}function Q(){j=!0,$()}function Y(){j=!1,T.current&&T.current.hasContext&&B()}return o.useEffect((function(){if(S){var e=Object(l.b)({playerRef:M,videoRef:L,onViewEnter:Q,onViewLeave:Y});return function(){null==e||e(),T.current&&(T.current.destroy(),w.remove(V))}}}),[M,L,S]),o.useEffect((function(){if(S){var e=L.current;return Z.forEach((function(t){P.current&&e&&("loadeddata"===t&&m(e)?J.handleEvent({type:t}):e.addEventListener(t,J))})),U(),function(){Z.forEach((function(t){e&&e.removeEventListener(t,J)}))}}}),[L,P,k,J,Z,S,U]),o.createElement("div",{id:t,ref:M,className:f.a.videobox,onClick:S?H:void 0,onMouseEnter:S?z:void 0,onMouseLeave:S?W:void 0,onMouseMove:S?q:void 0,onTouchEnd:S?X:void 0,"data-audio":R?"off":"on","data-has-play":S&&(v||h)?"":void 0,"data-playing":S&&_?"":void 0,"data-animate-poster":g,"data-stop":S?void 0:"","data-has-alpha":"true"},o.createElement("div",{className:i()(f.a.videoboxContainer,f.a.hasCanvas)},o.createElement(s.a,Object(a.a)({},r,{videoRef:L,extraClass:f.a.videoboxFill})),o.createElement("canvas",{id:t+"webglcanvas",ref:P,className:i()(f.a.alphaCanvas,f.a.videoboxFill,"webglcanvas"),"aria-label":I,role:"presentation"})),n)}}}]);
//# sourceMappingURL=https://static.parastorage.com/services/editor-elements/dist/TransparentVideo.8d353787.chunk.min.js.map